# ANYPLACE WEB
<details open><summary></summary>

- Separate web app frontends written in `AngularJS` / `GoogleMapsJS`.  
-  In future work we aim to migrate to: `VueJS` + `Leaflet`.
  - sample [code](./anyplace-vue/)
- All web apps [share](./shared/) some resources:

```
shared
├── css
├── images
└── js/
    └── anyplace-core-js
```


## Web Apps:
1. [architect](./anyplace_architect): `AngularJS` + `Grunt`
2. [viewer](./anyplace_viewer): `AngularJS` + `Grunt`
3. [viewer_campus](./anyplace_viewer_campus): `AngularJS` + `Grunt`
4. [developers](./developers): `sbt-play-swagger` + `swagger-ui`
   - this is generated by the backend (see [DOCUMENTATION.md](../../server/DOCUMENTATION.md))
5. [anyplace-vue](./anyplace-vue/): sample `VueJS` + `Leaflet` code

</details>


---
---


# DEPLOYMENT:
<details open><summary></summary>

---

## 1. Prepare sources
<details><summary></summary>

### 1.1 Clone from repository

- If starting from scratch you can clone:

```
git clone git@github.com:dmsl/anyplace.git git.web
```

##
- If the code was there, make sure to keep it updated
  - e.g. `git pull` in `git.web` to fetch latest sources..
- active development of the web apps is on the branch: `develop-clients-web`
  - you might want to `checkout` that one, or the `master` one


### 1.2 Configure the Backend URL
- You must modify: `shared/js/anyplace-core-js/api.js`
- and enter your backend's URL by modifying the API.url variable
- the public anyplace server is:
  - `https://ap.cs.ucy.ac.cy:44/api`

</details>


## 2. Install compilation tools
<details><summary></summary>

- The Angular apps need some dependencies
- these apps are:
  - [architect](./anyplace_architect), [viewer](./anyplace_viewer), or  [viewer_campus](./anyplace_viewer_campus)
- These are sample commands.
- Use up-to-date info to install the tools below

```bash
sudo apt install npm
sudo npm install -g bower
sudo apt install node-grunt-cli
```
</details>

## 3. Compile web apps
<details><summary></summary>

- Repeat this process for each app
- `cd` to each app dir
  - install [bower](http://bower.io/) dependencies
  - install [npm](https://www.npmjs.com) dependencies
  - deploy app using [grunt](http://gruntjs.com):
    - there is devepopment mode and normal deploy

### 3.1 Install  dependencies:
```
bower install
npm install  # npm install -g grunt-cli
```

### 3.2 Deploy app
- the development version will keep **watching** for resource changes
  - e.g. when you modify a JS file, it will recompile
  - or when you put new images or CSS files in `/shared/`, it will recompile/optimize those
- use it when you are developing
- if you want to `deploy` anyplace (i.e., on a server) use the second command

```
grunt # development version, that "watches" for changes

grunt deploy

## for windows use:
## grunt.cmd
```

### Compilation output (info)
<details><summary></summary>

- this will generate many files
- these will reside in the `build` folder of each app
- those are ignored from `git`

```
    <web-app>
    ├── build
    │   ├── css
    │   │   └── anyplace.min.css  # Concatenated and minified CSS
    │   ├── images
    │   │   └── ...               # Optimized images
    │   └── js
    │       └── anyplace.min.js   # Concatenated and minified JS files
    ├── bower_components
    │   └── ...                   # Bower dependencies
    └── index.html
```

</details>
</details>



## Sample script: [deploy_webapps.sh](./deploy_webapps.sh)
<details><summary>Output</summary>

0. probably will need adjustments but it's a good starting point
1. First, you must download the sources
2. Install any tools
3. Compile + Deploy the apps

</details>
</details>

